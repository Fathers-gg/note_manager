# Описание задания
#
# 1. Напишите функцию create_note(), которая:
#
# Запрашивает у пользователя информацию для создания заметки.
# Возвращает данные заметки в виде словаря.
# 2. Требования к функциональности:
#
# Заметка должна содержать следующие поля:
# username — имя пользователя.
# title — заголовок заметки.
# content — описание заметки.
# status — статус заметки (например, "новая", "в процессе", "выполнена").
# created_date — дата создания заметки (текущая дата, получаемая автоматически).
# issue_date — дата дедлайна (запрашивается у пользователя).
# Программа должна автоматически добавлять текущую дату в поле created_date с
# использованием библиотеки datetime.
# Реализуйте проверку корректности формата для поля issue_date (например, "день-месяц-год").
# 3. Вызовите функцию в конце файла, чтобы продемонстрировать её работу.
# Выведите результат работы функции на экран.

from datetime import datetime
def create_note():
    # Запрашиваем у пользователя имя
    stop_str = 'стоп'

    username = input("Введите имя пользователя или 'стоп' для выхода: ")
    if username.lower() == stop_str:
        return None  # Возвращаем None, если пользователь хочет выйти

    # Запрашиваем заголовок и содержание заметки
    title = input("Введите заголовок заметки: ")
    content = input("Введите содержание заметки: ")

    # Запрашиваем статус заметки
    status_options = {
        '1': 'выполнено',
        '2': 'в процессе',
        '3': 'отложено'
    }

    while True:
        status = input('Выберите статус заметки "Выполнено(1)", "В процессе(2)", "Отложено(3):" ')
        if status in status_options:
            status = status_options[status]
            break
        else:
            print('Ошибка ввода, повторите ввод.')

    # Получаем текущую дату
    created_date = datetime.now().strftime("%d-%m-%Y")

    # Запрашиваем дату дедлайна с проверкой формата
    while True:
        issue_date = input("Введите дату дедлайна (день-месяц-год): ")
        try:
            valid_date = datetime.strptime(issue_date, "%d-%m-%Y")
            break  # Выход из цикла, если дата корректна
        except ValueError:
            print("Неверный формат даты. Пожалуйста, введите дату в формате день-месяц-год.")

    # Создаем словарь с заметкой
    note = {
        "Имя пользователя": username,
        "Заголовок": title,
        "Содержание": content,
        "Статус": status,
        "Дата создания": created_date,
        "Дата истечения": valid_date.strftime("%d-%m-%Y")
    }

    return note

if __name__ == '__main__':
    #Вызов функции и вывод результата
    def displ():
        while True:
            note_data = create_note()
            if note_data is not None:
                print("\nСозданная заметка:")
                for key, value in note_data.items():
                    print(f'{key}: {value}')
            else:
                print("Создание заметки отменено.")

            # Запрашиваем, хочет ли пользователь создать ещё одну заметку
            another = input("Хотите создать еще одну заметку? (да/нет): ").strip().lower()
            if another != 'да':
                break


    # Запускаем программу
    displ()